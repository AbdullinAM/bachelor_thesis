%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{ПОСТАНОВКА ЗАДАЧИ АВТОМАТИЧЕСКОГО ИЗВЛЕЧЕНИЯ КОНТРАКТОВ}
\label{chapter:task}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Для успешной разработки технологии автоматического извлечения контрактов из исходного кода необходимо четко определить решаемую задачу, в том числе какие возможности должна включать в себя разрабатываемая методология. В данном разделе:
\begin{itemize}
\item выбирается анализируемый язык программирования;
\item определяется функциональность технологии автоматического извлечения контрактов;
\item предлагается подход к решению задачи автоматического извлечения контрактов;
\item определяются требования к прототипу системы автоматического извлечения контрактов.
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Выбор целевого языка программирования}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Так как одним из этапов выполнения работы была разработка модуля автоматического извлечения контрактов для системы статического анализа Borealis\cite{borealis}, было решено изначально в качестве целевого языка выбрать целевой язык анализатора --- С\cite{languageC}.

Выбор данного языка связан с некоторыми сложностями, так как различные конструкции языка С значительно усложняют его анализ. Одной из главных проблем являются указатели, присутствующие в языках C/C++, приводят к необходимости выполнения анализа указателей (points-to analysis), так как через указатели возможно осуществление неявного взаимовлияния различных участков кода друг на друга. Так же в языке присутствует препроцессор, адресная арифметика, вычисляемые ссылки и т.д. Все эти конструкции оказывают сильное влияние на сложность анализа программы.

Так же минусом данного языка является отсутствие каких-либо вспомогательных метаданных и исключений. Например, в языке Java\cite{languageJava} существуют документирующие комментарии, анализируя которые можно значительно облегчить задачу извлечения контрактов. Так же в Java присутствуют исключения, анализ которых тоже помогает в задаче извлечения контрактов. Язык С не обладает подобными конструкциями, поэтому анализ исходного кода с целью извлечения контрактов усложняется еще больше.

Однако, язык С до сих пор является достаточно популярным. Многие современные инструменты и библиотеки до сих пор пишутся на этом языке из-за его широких возможностей. Согласно данным на апрель 2016\footnote{http://www.tiobe.com/tiobe\_index} года язык С является вторым по популярности и занимает $13.9\%$ рынка. Полный рейтинг языков приведен в таблице \ref{table:languages}. При этом на языке С часто разрабатывается системное ПО, которое критично на отсутствие ошибок. На основе этого можно сказать, что анализ языка С с целью извлечения контрактов для улучшения статического анализа является актуальной задачей.

\begin{table}
	\caption{Рейтинг языков программирования}
	\begin{center}
	\begin{tabular}{|l|l|l|}
	\hline 
	\textbf{Рейтинг} & \textbf{Язык} & \textbf{Процент}	\\ 
	\hline 
	1 & Java & 20.84\% \\ 
	\hline 
	2 & C & 13.9\% \\ 
	\hline 
	3 & C++ & 5.92\% \\ 
	\hline 
	4 & C\# & 3.79\% \\ 
	\hline 
	5 & Python & 3.33\% \\ 
	\hline 
	6 & PHP & 2.99\% \\ 
	\hline 
	7 & JavaScript & 2.56\% \\ 
	\hline 
	8 & Perl & 2.52\% \\ 
	\hline 
	9 & Ruby & 2.34\% \\ 
	\hline 
	10 & Visual Basic .NET & 2.27\% \\ 
	\hline 
	\end{tabular} 
	\end{center}
	\label{table:languages}
\end{table}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Задача автоматического извлечения контрактов функций}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Задача данного исследования состоит в разработке подхода к автоматическому извлечению контрактов функций из исходного кода программ на основе анализа использования функций. Предлагаемый подход позволяет извлекать предусловия вызова функций из исходного кода. Предлагаемое решение является некоторым расширением рассмотренного ранее статического подхода к извлечению контрактов "Static specification inference using predicate mining"\cite{staticPredicateMining}. Основные идеи предлагаемого подхода:
\begin{itemize}
\item анализ не всех инструкций, предшествующих вызову функции (как это было в ранее рассмотренном подходе), а только условных операторов. Это позволит облегчить анализ благодаря уменьшению объема анализируемой информации. Однако, анализ только условных операторов исключает возможность извлечения спецификаций библиотек;
\item анализ большого количества исходного кода из разных проектов с целью составления базы контрактов для большого количества функций;
\item составление контракта для функции путем анализа ранее найденного набора;
\end{itemize}

Полученные контракты затем можно использовать для решения нескольких задач. Главной задачей данной работы является автоматическое извлечение контрактов с целью их дальнейшего использования в статическом анализаторе для увеличения полноты и точности анализа. Однако, полученные результаты так же можно использовать и для других целей. Например, автоматическая генерации документации или помощь в проведении аудита программы.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Задача разработки модуля автоматического извлечения контрактов для системы Borealis}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Модуль автоматического извлечения контрактов для системы статического анализа Borealis должен обладать следующей функциональностью:
\begin{itemize}
\item анализ исходного кода программы с целью выявления предикатов, которые предположительно являются контрактами;
\item возможность чтения/записи извлеченных предикатов из/в базу данных для сохранения результатов анализа;
\item формирование контрактов для функции из ранее определенного набора предикатов;
\item представление извлеченных контрактов в формате, понятном статическому анализатору.
\end{itemize}
Язык разработки прототипа --- С++\cite{languageC++}, так как система Borealis разрабатывается на языке С++.

Разработанный прототип позволит продемонстрировать работоспособность предлагаемого подхода и качественно оценить эффективность алгоритма. Так же, разработанный модуль позволит оценить влияние найденных контрактов на результаты статического анализа.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Резюме}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
В данном разделе поставлена задача разработки технологии автоматического извлечения контрактов из исходного кода, определены основные требования. Предложен способ решения этой задачи и выполнено их обоснование. Также поставлена задача разработки прототипа автоматического извлечения контрактов для системы статического анализа Borealis для проверки работоспособности технологии и проведения качественной оценки эффективности алгоритма. 